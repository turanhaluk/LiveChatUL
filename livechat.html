<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"/>
    <apex:slds />
    <div class="slds-scope">
        
		<style type='text/css'>
            
            .embeddedServiceHelpButton .helpButton .helpButtonEnabled {
				background-color: #CA0123;
				font-family: "Arial", sans-serif;
			}
			.embeddedServiceHelpButton .helpButton .helpButtonEnabled:focus {
				outline: 1px solid #CA0123;
			}
			.embeddedServiceHelpButton .helpButtonEnabled .helpButtonLabel .message{
				background: #CA0123 !important;
            	border:none;
            	color:white;
			}
			.embeddedServiceSidebarMinimizedDefaultUI.helpButton{
				background: #CA0123 !important;
			}
			.embeddedServiceSidebarMinimizedDefaultUI .minimizedText .message{
				background: #CA0123 !important;
            	border:none;
            	color:white;
			}

			/* offline Chat Css*/
			.embeddedServiceHelpButton .helpButton .helpButtonDisabled {
				background-color: grey;
				font-family: "Arial", sans-serif;
			} 
            .formContent iframe.vfFrame{
            	margin:0px !important;
            }
			.embeddedServiceHelpButton .helpButtonDisabled .helpButtonLabel .message{  
				background: gray !important;
            
		</style>
      
		<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
        <script type='text/javascript'>
            var initESW = function(gslbBaseURL) {
                embedded_svc.settings.displayHelpButton = true; //Or false
                embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'

				//embedded_svc.settings.defaultMinimizedText = '...'; //(Defaults to Chat with an Expert)
				//embedded_svc.settings.disabledMinimizedText = '...'; //(Defaults to Agent Offline)

				//embedded_svc.settings.loadingText = ''; //(Defaults to Loading)
				//embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)

				// Settings for Chat
				//embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
					// Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
					// Returns a valid button ID.
				//};
				//embedded_svc.settings.prepopulatedPrechatFields = {}; //Sets the auto-population of pre-chat form fields
				//embedded_svc.settings.fallbackRouting = []; //An array of button IDs, user IDs, or userId_buttonId
				//embedded_svc.settings.offlineSupportMinimizedText = '...'; //(Defaults to Contact Us)
				
				//Sets the auto-population of pre-chat form fields
				embedded_svc.settings.prepopulatedPrechatFields = {
					WebCountry__c: 'United States'
				};
                
                embedded_svc.settings.extraPrechatInfo = [{
                    "entityFieldMaps": [{
                        "doCreate":true,
                        "doFind":false,
                        "fieldName":"LastName",
                        "isExactMatch":false,
                        "label":"Last Name"
                    }, {
                        "doCreate":true,
                        "doFind":false,
                        "fieldName":"FirstName",
                        "isExactMatch":false,
                        "label":"First Name"
                    }, {
                        "doCreate":true,
                        "doFind":true,
                        "fieldName":"Email",
                        "isExactMatch":true,
                        "label":"Email"
                    }],
                    "entityName":"Contact"
                }];


				embedded_svc.settings.enabledFeatures = ['LiveAgent'];
				embedded_svc.settings.entryFeature = 'LiveAgent';
				
                
                embedded_svc.init(
                'https://ulenterpriseorg--uat.sandbox.my.salesforce.com',
                'https://ulenterpriseorg--uat.sandbox.my.salesforce-sites.com/livechat',
                gslbBaseURL,
                '00D8N0000006whg',
                'Live_Chat_Customer_Care',
                {
                    baseLiveAgentContentURL: 'https://c.la4-c1cs-ia4.salesforceliveagent.com/content',
                    deploymentId: '5724x0000001AQW',
                    buttonId: '5734x0000001AkB',
                    baseLiveAgentURL: 'https://d.la4-c1cs-ia4.salesforceliveagent.com/chat',
                    eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I4x000000ktvBEAQ_187104737eb',
                    isOfflineSupportEnabled: false					}
                    );
                    
                    setTimeout(()=>{
                                        
                    let minimizedContainerEle = document.getElementsByClassName('helpButtonDisabled')[0];
                    if( minimizedContainerEle ){
                        minimizedContainerEle.title = 'Agent is offline click here to contact';//Can change title.
                        minimizedContainerEle.addEventListener('click', function(event){
                          toggleOffLineMsgPopup();
                            
                        }); 
            		}
                  
				}, 1000);
			};

			if (!window.embedded_svc) {
				var s = document.createElement('script');
				s.setAttribute('src', 'https://ulenterpriseorg--uat.sandbox.my.salesforce.com/embeddedservice/5.0/esw.min.js');
				s.onload = function() {
					initESW(null);
				};
				document.body.appendChild(s);
			} else {
				initESW('https://service.force.com');
			}
        	//*03-08-2023*/
            function toggleOffLineMsgPopup(){
                document.querySelector(".offline-chat-popup").classList.toggle('slds-hide');
            }
		</script>
        <!-- offline popup //*03-08-2023*/-->
        <div class="offline-chat-popup slds-hide">
            <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01" class="slds-modal slds-fade-in-open slds-modal_small ">
                <div class="slds-modal__container">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" onclick="toggleOffLineMsgPopup();">
                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                            <use xmlns:xlink="http://www.w3.org./1999/xlink"
                                 xlink:href="{!URLFOR($Asset.SLDS,'assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                        </svg>
                        <span class="slds-assistive-text">Cancel and close</span>
                    </button>
                    <div class="slds-modal__header">
                        <h1 id="modal-heading-01" class="slds-modal__title slds-hyphenate slds-text-align_left">Sorry! - Live chat is currently offline</h1>
                    </div>
                    <div class="slds-modal__content slds-p-around_medium slds-offline-chat-msg-body" id="modal-content-id-1">
                        Hello! Our live chat is available 8 a.m. to 5 p.m. Central time, Monday through Friday. While we are out of the office,
                        you can reach us through our <a href="https://www.ul.com/contact-us">contact form </a>. We look forward to serving you!
                    </div>
                    <div class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" aria-label="Cancel" onclick="toggleOffLineMsgPopup();">Cancel</button>
                        <button class="slds-button slds-button_brand" aria-label="contact-us-button" onclick="window.location.href='https://www.ul.com/contact-us'">Contact US</button>
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
        </div>
        <!-- offline popup end //*03-08-2023*/-->
	</div>
</html>
